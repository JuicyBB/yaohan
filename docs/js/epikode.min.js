/*! epikode v1.0.0 | (c) 2024  | ISC License | http://github.com/your-username/project */
!(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)})((function(e){function t(t){var s=t||window.event,l=r.call(arguments,1),c=0,d=0,h=0,u=0,m=0,f=0;if(t=e.event.fix(s),t.type="mousewheel","detail"in s&&(h=-1*s.detail),"wheelDelta"in s&&(h=s.wheelDelta),"wheelDeltaY"in s&&(h=s.wheelDeltaY),"wheelDeltaX"in s&&(d=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(d=-1*h,h=0),c=0===h?d:h,"deltaY"in s&&(h=-1*s.deltaY,c=h),"deltaX"in s&&(d=s.deltaX,0===h&&(c=-1*d)),0!==h||0!==d){if(1===s.deltaMode){var g=e.data(this,"mousewheel-line-height");c*=g,h*=g,d*=g}else if(2===s.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,h*=v,d*=v}if(u=Math.max(Math.abs(h),Math.abs(d)),(!n||u<n)&&(n=u,a(s,u)&&(n/=40)),a(s,u)&&(c/=40,d/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/n),d=Math[d>=1?"floor":"ceil"](d/n),h=Math[h>=1?"floor":"ceil"](h/n),p.settings.normalizeOffset&&this.getBoundingClientRect){var w=this.getBoundingClientRect();m=t.clientX-w.left,f=t.clientY-w.top}return t.deltaX=d,t.deltaY=h,t.deltaFactor=n,t.offsetX=m,t.offsetY=f,t.deltaMode=0,l.unshift(t,c,d,h),o&&clearTimeout(o),o=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,l)}}function i(){n=null}function a(e,t){return p.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var o,n,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice;if(e.event.fixHooks)for(var c=s.length;c;)e.event.fixHooks[s[--c]]=e.event.mouseHooks;var p=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=l.length;i;)this.addEventListener(l[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",p.getLineHeight(this)),e.data(this,"mousewheel-page-height",p.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=l.length;i;)this.removeEventListener(l[--i],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),a=i["offsetParent"in e.fn?"offsetParent":"parent"]();return a.length||(a=e("body")),parseInt(a.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})),(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)})((function(e){var t,i,a,o,n,s,l="Close",r="BeforeClose",c="MarkupParse",p="Open",d="Change",h="mfp",u="."+h,m="mfp-ready",f="mfp-removing",g="mfp-prevent-close",v=function(){},w=!!window.jQuery,y=e(window),x=function(e,i){t.ev.on(h+e+u,i)},C=function(t,i,a,o){var n=document.createElement("div");return n.className="mfp-"+t,a&&(n.innerHTML=a),o?i&&i.appendChild(n):(n=e(n),i&&n.appendTo(i)),n},b=function(i,a){t.ev.triggerHandler(h+i,a),t.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),t.st.callbacks[i]&&t.st.callbacks[i].apply(t,e.isArray(a)?a:[a]))},k=function(i){return i===s&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),s=i),t.currTemplate.closeBtn},T=function(){e.magnificPopup.instance||(t=new v,t.init(),e.magnificPopup.instance=t)},z=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};v.prototype={constructor:v,init:function(){var i=navigator.appVersion;t.isLowIE=t.isIE8=document.all&&!document.addEventListener,t.isAndroid=/android/gi.test(i),t.isIOS=/iphone|ipad|ipod/gi.test(i),t.supportsTransition=z(),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),a=e(document),t.popupsCache={}},open:function(i){var o;if(!1===i.isObj){t.items=i.items.toArray(),t.index=0;var s,l=i.items;for(o=0;o<l.length;o++)if(s=l[o],s.parsed&&(s=s.el[0]),s===i.el[0]){t.index=o;break}}else t.items=e.isArray(i.items)?i.items:[i.items],t.index=i.index||0;if(t.isOpen)return void t.updateItemHTML();t.types=[],n="",i.mainEl&&i.mainEl.length?t.ev=i.mainEl.eq(0):t.ev=a,i.key?(t.popupsCache[i.key]||(t.popupsCache[i.key]={}),t.currTemplate=t.popupsCache[i.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,i),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=C("bg").on("click"+u,(function(){t.close()})),t.wrap=C("wrap").attr("tabindex",-1).on("click"+u,(function(e){t._checkIfClose(e.target)&&t.close()})),t.container=C("container",t.wrap)),t.contentContainer=C("content"),t.st.preloader&&(t.preloader=C("preloader",t.container,t.st.tLoading));var r=e.magnificPopup.modules;for(o=0;o<r.length;o++){var d=r[o];d=d.charAt(0).toUpperCase()+d.slice(1),t["init"+d].call(t)}b("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(x(c,(function(e,t,i,a){i.close_replaceWith=k(a.type)})),n+=" mfp-close-btn-in"):t.wrap.append(k())),t.st.alignTop&&(n+=" mfp-align-top"),t.fixedContentPos?t.wrap.css({overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}):t.wrap.css({top:y.scrollTop(),position:"absolute"}),(!1===t.st.fixedBgPos||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:a.height(),position:"absolute"}),t.st.enableEscapeKey&&a.on("keyup"+u,(function(e){27===e.keyCode&&t.close()})),y.on("resize"+u,(function(){t.updateSize()})),t.st.closeOnContentClick||(n+=" mfp-auto-cursor"),n&&t.wrap.addClass(n);var h=t.wH=y.height(),f={};if(t.fixedContentPos&&t._hasScrollBar(h)){var g=t._getScrollbarSize();g&&(f.marginRight=g)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):f.overflow="hidden");var v=t.st.mainClass;return t.isIE7&&(v+=" mfp-ie7"),v&&t._addClassToMFP(v),t.updateItemHTML(),b("BuildControls"),e("html").css(f),t.bgOverlay.add(t.wrap).prependTo(t.st.prependTo||e(document.body)),t._lastFocusedEl=document.activeElement,setTimeout((function(){t.content?(t._addClassToMFP(m),t._setFocus()):t.bgOverlay.addClass(m),a.on("focusin"+u,t._onFocusIn)}),16),t.isOpen=!0,t.updateSize(h),b(p),i},close:function(){t.isOpen&&(b(r),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(f),setTimeout((function(){t._close()}),t.st.removalDelay)):t._close())},_close:function(){b(l);var i=f+" "+m+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(i+=t.st.mainClass+" "),t._removeClassFromMFP(i),t.fixedContentPos){var o={marginRight:""};t.isIE7?e("body, html").css("overflow",""):o.overflow="",e("html").css(o)}a.off("keyup.mfp focusin"+u),t.ev.off(u),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),t.st.showCloseBtn&&(!t.st.closeBtnInside||!0===t.currTemplate[t.currItem.type])&&t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t.st.autoFocusLast&&t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.currItem=null,t.content=null,t.currTemplate=null,t.prevHeight=0,b("AfterClose")},updateSize:function(e){if(t.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,a=window.innerHeight*i;t.wrap.css("height",a),t.wH=a}else t.wH=e||y.height();t.fixedContentPos||t.wrap.css("height",t.wH),b("Resize")},updateItemHTML:function(){var i=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),i.parsed||(i=t.parseEl(t.index));var a=i.type;if(b("BeforeChange",[t.currItem?t.currItem.type:"",a]),t.currItem=i,!t.currTemplate[a]){var n=!!t.st[a]&&t.st[a].markup;b("FirstMarkupParse",n),t.currTemplate[a]=!n||e(n)}o&&o!==i.type&&t.container.removeClass("mfp-"+o+"-holder");var s=t["get"+a.charAt(0).toUpperCase()+a.slice(1)](i,t.currTemplate[a]);t.appendContent(s,a),i.preloaded=!0,b(d,i),o=i.type,t.container.prepend(t.contentContainer),b("AfterChange")},appendContent:function(e,i){t.content=e,e?t.st.showCloseBtn&&t.st.closeBtnInside&&!0===t.currTemplate[i]?t.content.find(".mfp-close").length||t.content.append(k()):t.content=e:t.content="",b("BeforeAppend"),t.container.addClass("mfp-"+i+"-holder"),t.contentContainer.append(t.content)},parseEl:function(i){var a,o=t.items[i];if(o.tagName?o={el:e(o)}:(a=o.type,o={data:o,src:o.src}),o.el){for(var n=t.types,s=0;s<n.length;s++)if(o.el.hasClass("mfp-"+n[s])){a=n[s];break}o.src=o.el.attr("data-mfp-src"),o.src||(o.src=o.el.attr("href"))}return o.type=a||t.st.type||"inline",o.index=i,o.parsed=!0,t.items[i]=o,b("ElementParse",o),t.items[i]},addGroup:function(e,i){var a=function(a){a.mfpEl=this,t._openClick(a,e,i)};i||(i={});var o="click.magnificPopup";i.mainEl=e,i.items?(i.isObj=!0,e.off(o).on(o,a)):(i.isObj=!1,i.delegate?e.off(o).on(o,i.delegate,a):(i.items=e,e.off(o).on(o,a)))},_openClick:function(i,a,o){if((void 0!==o.midClick?o.midClick:e.magnificPopup.defaults.midClick)||!(2===i.which||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey)){var n=void 0!==o.disableOn?o.disableOn:e.magnificPopup.defaults.disableOn;if(n)if(e.isFunction(n)){if(!n.call(t))return!0}else if(y.width()<n)return!0;i.type&&(i.preventDefault(),t.isOpen&&i.stopPropagation()),o.el=e(i.mfpEl),o.delegate&&(o.items=a.find(o.delegate)),t.open(o)}},updateStatus:function(e,a){if(t.preloader){i!==e&&t.container.removeClass("mfp-s-"+i),!a&&"loading"===e&&(a=t.st.tLoading);var o={status:e,text:a};b("UpdateStatus",o),e=o.status,a=o.text,t.preloader.html(a),t.preloader.find("a").on("click",(function(e){e.stopImmediatePropagation()})),t.container.addClass("mfp-s-"+e),i=e}},_checkIfClose:function(i){if(!e(i).hasClass(g)){var a=t.st.closeOnContentClick,o=t.st.closeOnBgClick;if(a&&o)return!0;if(!t.content||e(i).hasClass("mfp-close")||t.preloader&&i===t.preloader[0])return!0;if(i===t.content[0]||e.contains(t.content[0],i)){if(a)return!0}else if(o&&e.contains(document,i))return!0;return!1}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return(t.isIE7?a.height():document.body.scrollHeight)>(e||y.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(i){if(i.target!==t.wrap[0]&&!e.contains(t.wrap[0],i.target))return t._setFocus(),!1},_parseMarkup:function(t,i,a){var o;a.data&&(i=e.extend(a.data,i)),b(c,[t,i,a]),e.each(i,(function(i,a){if(void 0===a||!1===a)return!0;if(o=i.split("_"),o.length>1){var n=t.find(u+"-"+o[0]);if(n.length>0){var s=o[1];"replaceWith"===s?n[0]!==a[0]&&n.replaceWith(a):"img"===s?n.is("img")?n.attr("src",a):n.replaceWith(e("<img>").attr("src",a).attr("class",n.attr("class"))):n.attr(o[1],a)}}else t.find(u+"-"+i).html(a)}))},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:v.prototype,modules:[],open:function(t,i){return T(),t=t?e.extend(!0,{},t):{},t.isObj=!0,t.index=i||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,i){i.options&&(e.magnificPopup.defaults[t]=i.options),e.extend(this.proto,i.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},e.fn.magnificPopup=function(i){T();var a=e(this);if("string"==typeof i)if("open"===i){var o,n=w?a.data("magnificPopup"):a[0].magnificPopup,s=parseInt(arguments[1],10)||0;n.items?o=n.items[s]:(o=a,n.delegate&&(o=o.find(n.delegate)),o=o.eq(s)),t._openClick({mfpEl:o},a,n)}else t.isOpen&&t[i].apply(t,Array.prototype.slice.call(arguments,1));else i=e.extend(!0,{},i),w?a.data("magnificPopup",i):a[0].magnificPopup=i,t.addGroup(a,i);return a};var I,M,L,S="inline",P=function(){L&&(M.after(L.addClass(I)).detach(),L=null)};e.magnificPopup.registerModule(S,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push(S),x(l+"."+S,(function(){P()}))},getInline:function(i,a){if(P(),i.src){var o=t.st.inline,n=e(i.src);if(n.length){var s=n[0].parentNode;s&&s.tagName&&(M||(I=o.hiddenClass,M=C(I),I="mfp-"+I),L=n.after(M).detach().removeClass(I)),t.updateStatus("ready")}else t.updateStatus("error",o.tNotFound),n=e("<div>");return i.inlineElement=n,n}return t.updateStatus("ready"),t._parseMarkup(a,{},i),a}}});var O,E="ajax",_=function(){O&&e(document.body).removeClass(O)},F=function(){_(),t.req&&t.req.abort()};e.magnificPopup.registerModule(E,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){t.types.push(E),O=t.st.ajax.cursor,x(l+"."+E,F),x("BeforeChange."+E,F)},getAjax:function(i){O&&e(document.body).addClass(O),t.updateStatus("loading");var a=e.extend({url:i.src,success:function(a,o,n){var s={data:a,xhr:n};b("ParseAjax",s),t.appendContent(e(s.data),E),i.finished=!0,_(),t._setFocus(),setTimeout((function(){t.wrap.addClass(m)}),16),t.updateStatus("ready"),b("AjaxContentAdded")},error:function(){_(),i.finished=i.loadError=!0,t.updateStatus("error",t.st.ajax.tError.replace("%url%",i.src))}},t.st.ajax.settings);return t.req=e.ajax(a),""}}});var H,D=function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var a=t.st.image.titleSrc;if(a){if(e.isFunction(a))return a.call(t,i);if(i.el)return i.el.attr(a)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var i=t.st.image,a=".image";t.types.push("image"),x(p+a,(function(){"image"===t.currItem.type&&i.cursor&&e(document.body).addClass(i.cursor)})),x(l+a,(function(){i.cursor&&e(document.body).removeClass(i.cursor),y.off("resize"+u)})),x("Resize"+a,t.resizeImage),t.isLowIE&&x("AfterChange",t.resizeImage)},resizeImage:function(){var e=t.currItem;if(e&&e.img&&t.st.image.verticalFit){var i=0;t.isLowIE&&(i=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",t.wH-i)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,H&&clearInterval(H),e.isCheckingImgSize=!1,b("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var i=0,a=e.img[0],o=function(n){H&&clearInterval(H),H=setInterval((function(){if(a.naturalWidth>0)return void t._onImageHasSize(e);i>200&&clearInterval(H),i++,3===i?o(10):40===i?o(50):100===i&&o(500)}),n)};o(1)},getImage:function(i,a){var o=0,n=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===t.currItem&&(t._onImageHasSize(i),t.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,b("ImageLoadComplete")):(o++,o<200?setTimeout(n,100):s()))},s=function(){i&&(i.img.off(".mfploader"),i===t.currItem&&(t._onImageHasSize(i),t.updateStatus("error",l.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},l=t.st.image,r=a.find(".mfp-img");if(r.length){var c=document.createElement("img");c.className="mfp-img",i.el&&i.el.find("img").length&&(c.alt=i.el.find("img").attr("alt")),i.img=e(c).on("load.mfploader",n).on("error.mfploader",s),c.src=i.src,r.is("img")&&(i.img=i.img.clone()),c=i.img[0],c.naturalWidth>0?i.hasSize=!0:c.width||(i.hasSize=!1)}return t._parseMarkup(a,{title:D(i),img_replaceWith:i.img},i),t.resizeImage(),i.hasSize?(H&&clearInterval(H),i.loadError?(a.addClass("mfp-loading"),t.updateStatus("error",l.tError.replace("%url%",i.src))):(a.removeClass("mfp-loading"),t.updateStatus("ready")),a):(t.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,a.addClass("mfp-loading"),t.findImageSize(i)),a)}}});var B,A=function(){return void 0===B&&(B=void 0!==document.createElement("p").style.MozTransform),B};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,i=t.st.zoom,a=".zoom";if(i.enabled&&t.supportsTransition){var o,n,s=i.duration,c=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),a="all "+i.duration/1e3+"s "+i.easing,o={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},n="transition";return o["-webkit-"+n]=o["-moz-"+n]=o["-o-"+n]=o[n]=a,t.css(o),t},p=function(){t.content.css("visibility","visible")};x("BuildControls"+a,(function(){if(t._allowZoom()){if(clearTimeout(o),t.content.css("visibility","hidden"),e=t._getItemToZoom(),!e)return void p();n=c(e),n.css(t._getOffset()),t.wrap.append(n),o=setTimeout((function(){n.css(t._getOffset(!0)),o=setTimeout((function(){p(),setTimeout((function(){n.remove(),e=n=null,b("ZoomAnimationEnded")}),16)}),s)}),16)}})),x(r+a,(function(){if(t._allowZoom()){if(clearTimeout(o),t.st.removalDelay=s,!e){if(!(e=t._getItemToZoom()))return;n=c(e)}n.css(t._getOffset(!0)),t.wrap.append(n),t.content.css("visibility","hidden"),setTimeout((function(){n.css(t._getOffset())}),16)}})),x(l+a,(function(){t._allowZoom()&&(p(),n&&n.remove(),e=null)}))}},_allowZoom:function(){return"image"===t.currItem.type},_getItemToZoom:function(){return!!t.currItem.hasSize&&t.currItem.img},_getOffset:function(i){var a;a=i?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem);var o=a.offset(),n=parseInt(a.css("padding-top"),10),s=parseInt(a.css("padding-bottom"),10);o.top-=e(window).scrollTop()-n;var l={width:a.width(),height:(w?a.innerHeight():a[0].offsetHeight)-s-n};return A()?l["-moz-transform"]=l.transform="translate("+o.left+"px,"+o.top+"px)":(l.left=o.left,l.top=o.top),l}}});var j="iframe",W=function(e){if(t.currTemplate[j]){var i=t.currTemplate[j].find("iframe");i.length&&(e||(i[0].src="//about:blank"),t.isIE8&&i.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(j,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(j),x("BeforeChange",(function(e,t,i){t!==i&&(t===j?W():i===j&&W(!0))})),x(l+"."+j,(function(){W()}))},getIframe:function(i,a){var o=i.src,n=t.st.iframe;e.each(n.patterns,(function(){if(o.indexOf(this.index)>-1)return this.id&&(o="string"==typeof this.id?o.substr(o.lastIndexOf(this.id)+this.id.length,o.length):this.id.call(this,o)),o=this.src.replace("%id%",o),!1}));var s={};return n.srcAction&&(s[n.srcAction]=o),t._parseMarkup(a,s,i),t.updateStatus("ready"),a}}});var Y=function(e){var i=t.items.length;return e>i-1?e-i:e<0?i+e:e},X=function(e,t,i){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,i)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=t.st.gallery,o=".mfp-gallery";if(t.direction=!0,!i||!i.enabled)return!1;n+=" mfp-gallery",x(p+o,(function(){i.navigateByImgClick&&t.wrap.on("click"+o,".mfp-img",(function(){if(t.items.length>1)return t.next(),!1})),a.on("keydown"+o,(function(e){37===e.keyCode?t.prev():39===e.keyCode&&t.next()}))})),x("UpdateStatus"+o,(function(e,i){i.text&&(i.text=X(i.text,t.currItem.index,t.items.length))})),x(c+o,(function(e,a,o,n){var s=t.items.length;o.counter=s>1?X(i.tCounter,n.index,s):""})),x("BuildControls"+o,(function(){if(t.items.length>1&&i.arrows&&!t.arrowLeft){var a=i.arrowMarkup,o=t.arrowLeft=e(a.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(g),n=t.arrowRight=e(a.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(g);o.click((function(){t.prev()})),n.click((function(){t.next()})),t.container.append(o.add(n))}})),x(d+o,(function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout),t._preloadTimeout=setTimeout((function(){t.preloadNearbyImages(),t._preloadTimeout=null}),16)})),x(l+o,(function(){a.off(o),t.wrap.off("click"+o),t.arrowRight=t.arrowLeft=null}))},next:function(){t.direction=!0,t.index=Y(t.index+1),t.updateItemHTML()},prev:function(){t.direction=!1,t.index=Y(t.index-1),t.updateItemHTML()},goTo:function(e){t.direction=e>=t.index,t.index=e,t.updateItemHTML()},preloadNearbyImages:function(){var e,i=t.st.gallery.preload,a=Math.min(i[0],t.items.length),o=Math.min(i[1],t.items.length);for(e=1;e<=(t.direction?o:a);e++)t._preloadItem(t.index+e);for(e=1;e<=(t.direction?a:o);e++)t._preloadItem(t.index-e)},_preloadItem:function(i){if(i=Y(i),!t.items[i].preloaded){var a=t.items[i];a.parsed||(a=t.parseEl(i)),b("LazyLoad",a),"image"===a.type&&(a.img=e('<img class="mfp-img" />').on("load.mfploader",(function(){a.hasSize=!0})).on("error.mfploader",(function(){a.hasSize=!0,a.loadError=!0,b("LazyLoadError",a)})).attr("src",a.src)),a.preloaded=!0}}}});var R="retina";e.magnificPopup.registerModule(R,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,(function(e){return"@2x"+e}))},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=t.st.retina,i=e.ratio;(i=isNaN(i)?i():i)>1&&(x("ImageHasSize."+R,(function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/i,width:"100%"})})),x("ElementParse."+R,(function(t,a){a.src=e.replaceSrc(a,i)})))}}}}),T()})),(function(e){"use strict";var t=function(t){function i(){this.el=null,this.pin=null,this.shift=6,this.drop=0,this.location=null,this.init=function(){return this.el=e("<div></div>").addClass("mapplic-tooltip"),this.wrap=e("<div></div>").addClass("mapplic-tooltip-wrap").appendTo(this.el),this.close=e("<a></a>").addClass("mapplic-tooltip-close").attr("href","#").appendTo(this.wrap),this.close.on("click touchend",(function(e){e.preventDefault(),f.hideLocation(),f.o.zoom&&!f.o.zoomoutclose||f.moveTo(.5,.5,f.fitscale,400)})),this.image=e("<img>").addClass("mapplic-image").hide().appendTo(this.wrap),this.title=e("<h4></h4>").addClass("mapplic-tooltip-title").appendTo(this.wrap),this.content=e("<div></div>").addClass("mapplic-tooltip-content").appendTo(this.wrap),this.desc=e("<div></div>").addClass("mapplic-tooltip-description").appendTo(this.content),this.link=e("<a>"+f.loc.more+"</a>").addClass("mapplic-popup-link").attr("href","#").hide().appendTo(this.wrap),f.o.linknewtab&&this.link.attr("target","_blank"),this.triangle=e("<div></div>").addClass("mapplic-tooltip-triangle").prependTo(this.wrap),f.map.append(this.el),this},this.show=function(t){if(t){var i=this;if(this.location=t,f.hovertip&&f.hovertip.hide(),t.image?(this.el.addClass("has-image"),this.image.attr("src",""),this.image.attr("src",t.image).show()):(this.el.removeClass("has-image"),this.image.hide()),t.link){this.link.attr("href",t.link).css("background-color","").show();var a=C(t);a&&this.link.css("background-color",a)}else this.link.hide();this.title.text(t.title),t.description?this.desc.html(t.description):this.desc.empty(),this.content[0].scrollTop=0,this.pin=e('.mapplic-pin[data-location="'+t.id+'"]'),0==this.pin.length?this.shift=20:this.shift=Math.abs(parseFloat(this.pin.css("margin-top")))+20,e("img",this.el).off("load").on("load",(function(){i.position(),f.o.zoom&&i.zoom(t)})),this.position(),this.el.stop().css({opacity:1}).show(),f.o.zoom&&this.zoom(t)}},this.position=function(){this.location&&(this.el.css({left:100*this.location.x+"%",top:100*this.location.y+"%"}),this.drop=this.el.outerHeight()+this.shift)},this.zoom=function(e){var t=.5,i=e.zoom?parseFloat(e.zoom):f.o.maxscale;t=((f.container.el.height()-this.drop)/2+this.drop)/f.container.el.height(),f.moveTo(e.x,e.y,i,600,t)},this.hide=function(){var e=this;this.location=null,this.el.stop().fadeOut(300,(function(){e.desc&&e.desc.empty()}))},this.limitSize=function(){this.el.css("max-width",""),this.content.css("max-height","");var e=f.container.el.width()-100,t=f.container.el.height()-140;e<parseFloat(this.el.css("max-width"))&&this.el.css("max-width",e+"px"),t<parseFloat(this.content.css("max-height"))&&this.content.css("max-height",t+"px")}}function a(){this.el=null,this.init=function(){return this.el=e("<div></div>").addClass("mapplic-lightbox mfp-hide"),this.title=e("<h2></h2>").addClass("mapplic-lightbox-title").appendTo(this.el),this.desc=e("<div></div>").addClass("mapplic-lightbox-description").appendTo(this.el),this.link=e("<a>"+f.loc.more+"</a>").addClass("mapplic-popup-link").attr("href","#").hide().appendTo(this.el),f.o.linknewtab&&this.link.attr("target","_blank"),f.el.append(this.el),this},this.show=function(t){if(this.location=t,this.title.text(t.title),this.desc.html(t.description),t.link){this.link.attr("href",t.link).css("background-color","").show();var i=C(t);i&&this.link.css("background-color",i)}else this.link.hide();var a=this;e.magnificPopup.open({items:{src:this.el},type:"inline",removalDelay:300,mainClass:"mfp-fade",callbacks:{beforeClose:function(){a.hide()}}});var o=t.zoom?parseFloat(t.zoom):f.o.maxscale;f.o.zoom&&f.moveTo(t.x,t.y,o,600),f.tooltip&&f.tooltip.hide()},this.showImage=function(t){this.location=t;var i=this;e.magnificPopup.open({items:{src:t.image},type:"image",removalDelay:300,mainClass:"mfp-fade",callbacks:{beforeClose:function(){i.hide()}}});var a=t.zoom?parseFloat(t.zoom):f.o.maxscale;f.o.zoom&&f.moveTo(t.x,t.y,a,600)},this.hide=function(){this.location=null,f.hideLocation(),f.o.zoom&&!f.o.zoomoutclose||f.moveTo(.5,.5,f.fitscale,400)}}function o(){this.el=null,this.pin=null,this.shift=6,this.hovertipdesc=!1,this.init=function(){var t=this;return this.el=e("<div></div>").addClass("mapplic-tooltip mapplic-hovertip"),this.wrap=e("<div></div>").addClass("mapplic-tooltip-wrap").appendTo(this.el),this.title=e("<h4></h4>").addClass("mapplic-tooltip-title").appendTo(this.wrap),this.hovertipdesc&&(this.desc=e("<div></div>").addClass("mapplic-tooltip-description").appendTo(this.wrap)),this.triangle=e("<div></div>").addClass("mapplic-tooltip-triangle").appendTo(this.wrap),e(f.map).on("mouseover",".mapplic-layer a",(function(){var i="";e(this).hasClass("mapplic-pin")?(i=e(this).data("location"),t.pin=e('.mapplic-pin[data-location="'+i+'"]'),t.shift=Math.abs(parseFloat(t.pin.css("margin-top")))+20):(i=e(this).attr("xlink:href").slice(1),t.shift=20);var a=f.l[i];a&&a.title&&t.show(a)})).on("mouseout",(function(){t.hide()})),f.o.selector&&e(f.map).on("mouseover",f.o.selector,(function(){var i=f.l[e(this).attr("id")];t.shift=20,i&&i.title&&t.show(i)})).on("mouseout",(function(){t.hide()})),f.map.append(this.el),this},this.show=function(e){f.location!=e&&(this.title.text(e.title),this.hovertipdesc&&this.desc.html(e.description),this.position(e),this.el.stop().fadeIn(100))},this.position=function(e){e&&(this.el.css({left:100*e.x+"%",top:100*e.y+"%"}),this.drop=this.el.outerHeight()+this.shift)},this.hide=function(){this.el.stop().fadeOut(200)}}function n(){this.param="location",this.init=function(){var e=this;this.check(0),window.onpopstate=function(t){return t.state&&e.check(600),!1}},this.check=function(e){var t=this.getUrlParam(this.param);t&&f.showLocation(t,e,!0)},this.getUrlParam=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},this.update=function(e){var t;void 0!==window.URL?(t=new URL(window.location.href),t.searchParams.set(this.param,e),t=t.href):t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+this.param+"="+e,window.history.pushState({path:t},"",t)},this.clear=function(){var e;void 0!==window.URL?(e=new URL(window.location.href),e.searchParams.delete(this.param),e=e.href):e=window.location.pathname,history.pushState("",document.title,e)}}function s(){this.param="location",this.init=function(){var t=this;this.check(0),e(window).on("hashchange",(function(){t.check(600)}))},this.check=function(e){var t=location.hash.slice(this.param.length+2);f.showLocation(t,e,!0)},this.update=function(e){window.location.hash=this.param+"-"+e},this.clear=function(){window.location.hash=this.param}}function l(){this.el=null,this.opacity=null,this.init=function(){return this.el=e("<div></div>").addClass("mapplic-minimap").appendTo(f.container.el),this.el.click((function(t){t.preventDefault();var i=(t.pageX-e(this).offset().left)/e(this).width(),a=(t.pageY-e(this).offset().top)/e(this).height();f.moveTo(i,a,f.scale/f.fitscale,100)})),this},this.addLayer=function(t){var i=e("<div></div>").addClass("mapplic-minimap-layer").attr("data-floor",t.id).appendTo(this.el),a=this;e("<img>").attr("src",t.minimap).addClass("mapplic-minimap-background").appendTo(i),e("<div></div>").addClass("mapplic-minimap-overlay").appendTo(i),e("<img>").attr("src",t.minimap).addClass("mapplic-minimap-active").on("load",(function(){a.update()})).appendTo(i)},this.show=function(t){e(".mapplic-minimap-layer",this.el).hide(),e('.mapplic-minimap-layer[data-floor="'+t+'"]',this.el).show()},this.update=function(t,i){var a=e(".mapplic-minimap-active",this.el);void 0===t&&(t=f.x),void 0===i&&(i=f.y);var o=f.container.el.width()/f.contentWidth/f.scale*this.el.width(),n=f.container.el.height()/f.contentHeight/f.scale*this.el.height(),s=-i/f.contentHeight/f.scale*this.el.height(),l=-t/f.contentWidth/f.scale*this.el.width(),r=l+o,c=s+n;a.each((function(){e(this)[0].style.clip="rect("+s+"px, "+r+"px, "+c+"px, "+l+"px)"}));var p=this;this.el.show(),this.el.css("opacity",1),clearTimeout(this.opacity),this.opacity=setTimeout((function(){p.el.css("opacity",0),setTimeout((function(){p.el.hide()}),600)}),2e3)}}function r(){this.el=null,this.nr=0,this.init=function(){return this.el=e("<div></div>").addClass("mapplic-legend"),this},this.build=function(t){var i=this;e.each(t,(function(e,t){"true"==t.legend&&i.add(t)})),this.nr>0&&this.el.appendTo(f.container.el)},this.add=function(t){var i=this.newToggle(t,!0);if(i)i.appendTo(this.el);else{var a=e("<span></span>").addClass("mapplic-legend-key");t.color&&a.css("background-color",t.color),e("<span></span>").addClass("mapplic-legend-label").text(t.title).prepend(a).appendTo(this.el)}this.nr++},this.toggle=function(t,i){e('*[id="'+t+'"]',f.map).toggle(i),e('*[data-category*="'+t+'"]',f.map).each((function(){var a=e(this).attr("data-category");if(a==t)e(this).toggle(i);else{var o=a.split(","),n=!1;o.forEach((function(t){e('.mapplic-toggle > input[data-group="'+t+'"]')[0].checked&&(n=!0)})),e(this).toggle(n)}}))},this.newToggle=function(t,i){var a=this,o=null;if("true"==t.toggle){o=e('<label class="mapplic-toggle"></label>');var n=e('<input type="checkbox" checked>').attr("data-group",t.id).appendTo(o),s=e("<span></span>").addClass("mapplic-toggle-circle").appendTo(o)
;i&&e("<span></span>").addClass("mapplic-legend-label").text(t.title).appendTo(o),t.color&&s.css("background-color",t.color),"true"==t.switchoff&&n.prop("checked",!1),n.change((function(){e('.mapplic-toggle > input[data-group="'+t.id+'"]',f.el).prop("checked",this.checked),a.toggle(t.id,this.checked)}))}return o},this.applyToggles=function(){var t=this;e(".mapplic-toggle > input",f.el).each((function(){t.toggle(e(this).attr("data-group"),this.checked)}))}}function c(){this.el=null,this.g={},this.filter=null,this.input=null,this.list=null,this.tags=null,this.taglist={},this.init=function(){var t=this;this.el=e("<div></div>").addClass("mapplic-sidebar").appendTo(f.el),this.filter=e("<div></div>").addClass("mapplic-filter").appendTo(this.el),this.tags=e("<div></div>").addClass("mapplic-filter-tags").appendTo(this.filter),this.input=e("<input>").attr({type:"text",spellcheck:"false",placeholder:f.loc.search}).addClass("mapplic-search-input").keyup((function(i){t.search(),13==i.keyCode&&e("li > a",t.el).filter(":visible:first").click()})),f.o.search&&this.input.prependTo(this.filter),f.clear=e("<a></a>").attr("href","#").addClass("mapplic-search-clear").click((function(e){e.preventDefault(),t.input.val(""),t.search()})).appendTo(this.filter);var i=e("<div></div>").addClass("mapplic-list-container").appendTo(this.el);this.list=e("<ol></ol>").addClass("mapplic-list").appendTo(i),f.o.search||this.el.addClass("mapplic-sidebar-nosearch")},this.addTag=function(t){var i=this;if(i.taglist[t.id])return!1;var a=e("<div></div>").addClass("mapplic-tag").text(t.title).appendTo(this.tags);e("<span></span>").appendTo(a),t.color&&a.css("background-color",t.color),a.click((function(){a.remove(),delete i.taglist[t.id],i.search()})).appendTo(a),i.taglist[t.id]=!0,i.search()},this.placeholder=function(t){var i="";if(t){var a=t.split(" ");a[0]&&(i+=a[0][0]),a[1]&&(i+=a[1][0])}return e("<div></div>").addClass("mapplic-thumbnail mapplic-thumbnail-placeholder").text(i.toUpperCase())},this.addCategories=function(t){var i=this,a=e("<li></li>").addClass("mapplic-list-expandable"),o=e("<ol></ol>").appendTo(a);this.list.append(a),t&&e.each(t,(function(t,a){if(f.g[a.id]=a,a.nr=0,"true"!=a.hide){var n=e("<li></li>").addClass("mapplic-list-category").attr("data-category",a.id),s=e("<a></a>").attr("href","#").prependTo(n),l=null;l=a.icon?e("<img>").attr("src",a.icon).addClass("mapplic-thumbnail").appendTo(s):i.placeholder(a.title).appendTo(s),a.color&&l.css("background-color",a.color);var r=e("<h4></h4").text(a.title).appendTo(s);a.about||r.addClass("mapplic-margin"),a.count=e("<span></span>").text("(0)").addClass("mapplic-list-count").appendTo(r),a.about&&e("<span></span>").addClass("mapplic-about").html(a.about).appendTo(s);var c=f.legend.newToggle(a);c&&c.appendTo(n),s.on("click",(function(t){t.preventDefault(),a.nr<1&&c?e("> input",c).trigger("click"):(i.input.val(""),i.addTag(a))})),a.list=n,n.appendTo(o)}}))},this.countCategory=function(){e.each(f.g,(function(e,t){t.count&&(t.count.text("("+t.nr+")"),t.nr<1?t.count.hide():t.count.show())}))},this.addLocation=function(t){var i=e("<li></li>").addClass("mapplic-list-location").attr("data-location",t.id),a=e("<a></a>").attr("href","#").click((function(i){i.preventDefault(),f.showLocation(t.id,600),e(window).width()<668&&"lightbox"!=(t.action||f.o.action)&&e("html, body").animate({scrollTop:f.container.el.offset().top},400)})).appendTo(i),o=C(t);if(o&&i.css("border-color",o),f.o.hidenofilter&&i.hide(),t.thumbnail?e("<img>").attr("src",t.thumbnail).addClass("mapplic-thumbnail").appendTo(a):f.o.thumbholder&&this.placeholder(t.title).appendTo(a),e("<h4></h4>").text(t.title).appendTo(a),e("<span></span>").html(t.about).addClass("mapplic-about").appendTo(a),t.category){t.category.toString().split(",").forEach((function(e){f.g[e]&&f.g[e].nr++}))}return this.list.append(i),i},this.search=function(){var t=this.input.val(),i=this;t?f.clear.fadeIn(100):f.clear.fadeOut(100),e.each(f.g,(function(a,o){if(o.list){var n=!1;e.isEmptyObject(i.taglist)?e.each(f.o.searchfields,(function(e,i){o[i]&&!n&&(n=!(-1==o[i].toLowerCase().indexOf(t.toLowerCase())))})):n=!1,n?o.list.slideDown(200):o.list.slideUp(200)}})),e.each(f.l,(function(a,o){if(o.list){var n=!1;f.o.hidenofilter&&e.isEmptyObject(i.taglist)&&!t||(e.each(f.o.searchfields,(function(e,i){o[i]&&!n&&(n=!(-1==o[i].toLowerCase().indexOf(t.toLowerCase())))})),e.each(i.taglist,(function(e,t){o.category&&-1!=o.category.indexOf(e)||(n=!1)}))),n?o.list.slideDown(200):o.list.slideUp(200)}}))},this.sort=function(){var t=this,i=this.list.children(".mapplic-list-location").get();i.sort((function(t,i){var a=e(t).text().toUpperCase(),o=e(i).text().toUpperCase();return a<o?-1:a>o?1:0})),e.each(i,(function(e,i){t.list.append(i)}))}}function p(){this.el=null,this.init=function(){return this.el=e("<div></div>").addClass("mapplic-coordinates").appendTo(f.container.el),this.el.append("x: "),e("<code></code>").addClass("mapplic-coordinates-x").appendTo(this.el),this.el.append(" y: "),e("<code></code>").addClass("mapplic-coordinates-y").appendTo(this.el),e('<input type="text"/>').addClass("coords").appendTo(this.el),e(".mapplic-layer",f.map).on("mousemove",(function(t){var i=(t.pageX-f.map.offset().left)/f.map.width()+.03,a=(t.pageY-f.map.offset().top)/f.map.height()+.05;e(".mapplic-coordinates-x").text(parseFloat(i).toFixed(4)),e(".mapplic-coordinates-y").text(parseFloat(a).toFixed(4)),e(".coords").val('x: "'+parseFloat(i).toFixed(4)+'", y: "'+parseFloat(a).toFixed(4)+'"')})),this}}function d(){this.el=null,this.init=function(){return this.el=e("<a></a>").attr("href","#").addClass("mapplic-button mapplic-clear-button").appendTo(f.container.el),f.o.zoombuttons||this.el.css("bottom","0"),this.el.on("click touchstart",(function(e){e.preventDefault(),f.hideLocation(),f.moveTo(.5,.5,f.fitscale,400)})),this},this.update=function(e){e==f.fitscale?this.el.stop().fadeOut(200):this.el.stop().fadeIn(200)}}function h(){this.el=null,this.init=function(){return this.el=e("<div></div>").addClass("mapplic-zoom-buttons").appendTo(f.container.el),this.zoomin=e("<a></ha>").attr("href","#").addClass("mapplic-button mapplic-zoomin-button").appendTo(this.el),this.zoomin.on("click touchstart",(function(e){e.preventDefault(),f.container.stopMomentum();var t=f.scale;f.scale=T(t+.8*t),f.x=b(f.x-(f.container.el.width()/2-f.x)*(f.scale/t-1)),f.y=k(f.y-(f.container.el.height()/2-f.y)*(f.scale/t-1)),z(f.x,f.y,f.scale,400,"ease")})),this.zoomout=e("<a></ha>").attr("href","#").addClass("mapplic-button mapplic-zoomout-button").appendTo(this.el),this.zoomout.on("click touchstart",(function(e){e.preventDefault(),f.container.stopMomentum();var t=f.scale;f.scale=T(t-.4*t),f.x=b(f.x-(f.container.el.width()/2-f.x)*(f.scale/t-1)),f.y=k(f.y-(f.container.el.height()/2-f.y)*(f.scale/t-1)),z(f.x,f.y,f.scale,400,"ease")})),this},this.update=function(e){this.zoomin.removeClass("mapplic-disabled"),this.zoomout.removeClass("mapplic-disabled"),e==f.fitscale?this.zoomout.addClass("mapplic-disabled"):e==f.o.maxscale&&this.zoomin.addClass("mapplic-disabled")}}function u(){this.el=null,this.init=function(){this.el=e("<a></a>").attr("href","#").attr("href","#").addClass("mapplic-button mapplic-fullscreen-button").click((function(t){t.preventDefault(),f.el.toggleClass("mapplic-fullscreen"),e(document).resize()})).appendTo(f.container.el),e(document).keyup((function(t){27===t.keyCode&&e(".mapplic-fullscreen")[0]&&(e(".mapplic-element.mapplic-fullscreen").removeClass("mapplic-fullscreen"),e(document).resize())}))}}function m(){this.el=null,this.oldW=0,this.oldH=0,this.position={x:0,y:0},this.momentum=null,this.init=function(){return this.el=e("<div></div>").addClass("mapplic-container").appendTo(f.el),f.map=e("<div></div>").addClass("mapplic-map").appendTo(this.el),f.map.css({width:f.contentWidth,height:f.contentHeight}),this},this.calcHeight=function(t){var i=t.toString().replace("px","");return"auto"==i&&f.container.el?i=f.container.el.width()*f.contentHeight/f.contentWidth:"%"==i.slice(-1)&&(i=e(window).height()*i.replace("%","")/100),!!e.isNumeric(i)&&i},this.resetZoom=function(){var e=f.l.init;if(e){var t=e.zoom?parseFloat(e.zoom):f.o.maxscale;f.switchLevel(e.level),f.moveTo(e.x,e.y,t,0)}else f.moveTo(.5,.5,f.fitscale,0)},this.revealChild=function(t){e(".mapplic-pin[data-location^="+t.id+"]",f.map).addClass("mapplic-revealed"),e("[id^="+t.id+"]",f.map).addClass("mapplic-revealed")},this.revealZoom=function(t){e(".mapplic-pin[data-reveal]",f.map).each((function(){var i=e(this).data("reveal");t>=i?e(this).addClass("mapplic-revealed"):e(this).removeClass("mapplic-revealed")}))},this.coverAll=function(){e(".mapplic-revealed",f.map).removeClass("mapplic-revealed")},this.stopMomentum=function(){cancelAnimationFrame(this.momentum),null!=this.momentum&&(f.x=this.position.x,f.y=this.position.y),this.momentum=null},this.addControls=function(){f.map.addClass("mapplic-zoomable"),document.ondragstart=function(){return!1};var t={x:0,y:0},i={x:this.position.x,y:this.position.y},a={x:0,y:0},o=this,n=function(){o.momentum=requestAnimationFrame(n),f.map.hasClass("mapplic-dragging")?(i.x=o.position.x,i.y=o.position.y,o.position.x=t.x,o.position.y=t.y,a.x=o.position.x-i.x,a.y=o.position.y-i.y):(o.position.x+=a.x,o.position.y+=a.y,a.x*=.85,a.y*=.85,Math.abs(a.x)+Math.abs(a.y)<.1&&(o.stopMomentum(),f.x=o.position.x,f.y=o.position.y)),o.position.x=b(o.position.x),o.position.y=k(o.position.y),z(o.position.x,o.position.y)};e(".mapplic-map-image",f.map).on("mousedown",(function(i){f.dragging=!1,f.map.addClass("mapplic-dragging");var a={x:i.pageX,y:i.pageY};o.stopMomentum(),t.x=b(i.pageX-a.x+f.x),t.y=k(i.pageY-a.y+f.y),n(),f.map.on("mousemove",(function(e){f.dragging=!0,t.x=b(e.pageX-a.x+f.x),t.y=k(e.pageY-a.y+f.y)})),e(document).on("mouseup",(function(){f.map.off("mousemove"),e(document).off("mouseup"),f.map.removeClass("mapplic-dragging")}))})),f.o.mousewheel&&e(".mapplic-layer",f.el).bind("mousewheel DOMMouseScroll",(function(e,t){e.preventDefault(),o.stopMomentum();var i=f.scale;f.scale=T(i+i*t/5),f.x=b(f.x-(e.pageX-f.container.el.offset().left-f.x)*(f.scale/i-1)),f.y=k(f.y-(e.pageY-f.container.el.offset().top-f.y)*(f.scale/i-1)),z(f.x,f.y,f.scale,200,"ease")}));var s=null,l=null,r=0,c=null;e(".mapplic-map-image",f.map).on("touchstart",(function(i){i.preventDefault();var a=i.originalEvent;1==a.touches.length&&(f.touchTime=(new Date).getTime(),f.dragging=!1,f.map.addClass("mapplic-dragging"),o.stopMomentum(),s={x:a.touches[0].pageX-f.x,y:a.touches[0].pageY-f.y},t.x=b(a.touches[0].pageX-s.x),t.y=k(a.touches[0].pageY-s.y),n(),f.map.on("touchmove",(function(e){e.preventDefault(),f.dragging=!0;var i=e.originalEvent;1==i.touches.length&&(t.x=b(i.touches[0].pageX-s.x),t.y=k(i.touches[0].pageY-s.y))})),e(document).on("touchend",(function(t){t.preventDefault(),e(document).off("touchend"),f.map.off("touchmove"),f.map.removeClass("mapplic-dragging")})))})),e(".mapplic-map-image",f.map).on("touchstart",(function(t){t.preventDefault();var i=t.originalEvent;2==i.touches.length&&(f.dragging=!1,f.map.addClass("mapplic-dragging"),o.stopMomentum(),s={x:i.touches[0].pageX-f.x,y:i.touches[0].pageY-f.y},l={x:i.touches[1].pageX-f.x,y:i.touches[1].pageY-f.y},r=Math.sqrt(Math.pow(s.x-l.x,2)+Math.pow(s.y-l.y,2)),c=f.scale,f.map.off("touchmove"),f.map.on("touchmove",(function(e){e.preventDefault(),f.dragging=!0;var t=e.originalEvent,i=(t.touches.length,{x:(t.touches[0].pageX+t.touches[1].pageX)/2,y:(t.touches[0].pageY+t.touches[1].pageY)/2}),a=Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))/r,o=f.scale;f.scale=T(c*a),f.x=b(f.x-(i.x-f.container.el.offset().left-f.x)*(f.scale/o-1)),f.y=k(f.y-(i.y-f.container.el.offset().top-f.y)*(f.scale/o-1)),z(f.x,f.y,f.scale,0,"ease")})),e(document).on("touchend",(function(t){e(document).off("touchend"),f.map.off("touchmove"),f.map.removeClass("mapplic-dragging")})))}))}}var f=this;f.o={source:"locations.json",selector:"[id^=landmark] > *, svg > #items > *",csv:!1,landmark:!1,height:420,portrait:668,minimap:!1,sidebar:!0,hidenofilter:!1,search:!0,searchfields:["title","about"],thumbholder:!1,deeplinking:!0,clearbutton:!0,zoombuttons:!0,zoomoutclose:!1,closezoomout:!0,action:"default",linknewtab:!1,lightbox:!0,hovertip:!0,marker:"default",fillcolor:null,fullscreen:!0,mousewheel:!0,autopopulate:!1,alphabetic:!1,maxscale:3,zoom:!0,zoommargin:200,mapfill:!1,developer:!1},f.loc={more:"More",search:"Search"},f.el=t,f.init=function(t){f.o=e.extend(f.o,t),"undefined"!=typeof mapplic_localization&&(f.loc=e.extend(f.loc,mapplic_localization)),f.el.addClass("mapplic-element mapplic-loading");f.el.data("mapdata");return f.el.data("mapdata")?(f.el.removeAttr("data-mapdata"),g(f.el.data("mapdata")),f.el.removeClass("mapplic-loading")):"string"==typeof f.o.source?e.getJSON(f.o.source,(function(e){g(e),f.el.removeClass("mapplic-loading")})).fail((function(){console.error("Couldn't load map data. (Make sure to run the script through web server)"),f.el.removeClass("mapplic-loading").addClass("mapplic-error"),alert("Data file missing or invalid!\nMake sure to run the script through web server.")})):(g(f.o.source),f.el.removeClass("mapplic-loading")),f};var g=function(t){f.data=t,f.g={},f.l={};var g=null;f.o=e.extend(f.o,t),f.o.zoommargin=parseFloat(f.o.zoommargin),f.o.maxscale=parseFloat(f.o.maxscale),f.el.data("height")&&(f.o.height=f.el.data("height")),f.contentWidth=parseFloat(t.mapwidth),f.contentHeight=parseFloat(t.mapheight),f.container=(new m).init(),f.levelselect=e("<div></div>").addClass("mapplic-levels-select"),f.o.minimap&&(f.minimap=(new l).init()),f.legend=(new r).init(),f.legend.build(t.groups||t.categories),f.o.sidebar?(f.sidebar=new c,f.sidebar.init(),f.sidebar.addCategories(t.groups||t.categories)):f.container.el.css("width","100%"),f.el.trigger("mapstart",f);var w=0,y=0;if(t.levels&&e.each(t.levels,(function(t,i){var a=i.map,o=a.substr(a.lastIndexOf(".")+1).toLowerCase(),n=e("<div></div>").addClass("mapplic-layer").attr("data-floor",i.id).hide().appendTo(f.map);switch(o){case"jpg":case"jpeg":case"png":case"gif":e("<img>").attr("src",a).addClass("mapplic-map-image").appendTo(n),f.addLocations(i.locations,i.id);break;case"svg":y++,e("<div></div>").addClass("mapplic-map-image").load(a,(function(){if(f.addLocations(i.locations,i.id),e(f.o.selector,this).on("click touchend",(function(){var t=(new Date).getTime()-f.touchTime;(!f.dragging||navigator.userAgent.toLowerCase().indexOf("android")>-1&&t<130)&&f.showLocation(e(this).attr("id"),600)})),f.o.autopopulate){var t=[];e(f.o.selector,this).each((function(){var i=e(this).attr("id"),a=f.l[i];a||(a={id:i,title:i.charAt(0).toUpperCase()+i.slice(1),pin:"hidden"},t.push(a))})),f.addLocations(t,i.id)}e("svg a",this).each((function(){var t=f.l[e(this).attr("xlink:href").substr(1)];t&&(e(this).attr("class","mapplic-clickable"),t.el=e(this))})),e("svg a",this).click((function(t){var i=e(this).attr("xlink:href").substr(1);f.showLocation(i,600),t.preventDefault()})),f.deeplinking&&f.deeplinking.check(0),f.el.trigger("svgloaded",[this,i.id]),0==--y&&v()})).appendTo(n);break;default:alert("File type "+o+" is not supported!")}f.minimap&&f.minimap.addLayer(i),f.levelselect.append(e("<button></button>").addClass("btn btn-sm levels-btn").attr("value",i.id).text(i.title)),g&&!i.show||(g=i.id),w++})),f.tooltip=(new i).init(),f.o.lightbox&&e.magnificPopup&&(f.lightbox=(new a).init()),f.o.hovertip&&(f.hovertip=(new o).init()),f.o.clearbutton&&(f.clearbutton=(new d).init()),f.o.zoombuttons&&(f.zoombuttons=(new h).init()),f.o.fullscreen&&(f.fullscreen=(new u).init()),f.o.developer&&(f.devtools=(new p).init()),w>1){f.levels=e("<div></div>").addClass("mapplic-levels");var x=e('<a href="#"></a>').addClass("d-none mapplic-levels-up").appendTo(f.levels);f.levelselect.appendTo(f.levels);var C=e('<a href="#"></a>').addClass("d-none mapplic-levels-down").appendTo(f.levels);f.container.el.append(f.levels),e("button",f.levelselect).click((function(){var t=e(this).val();f.switchLevel(t)})),x.click((function(t){t.preventDefault(),e(this).hasClass("mapplic-disabled")||f.switchLevel("+")})),C.click((function(t){t.preventDefault(),e(this).hasClass("mapplic-disabled")||f.switchLevel("-")}))}f.switchLevel(g),"true"===f.o.portrait&&(f.o.portrait=!0),e(window).resize((function(){if(1==f.o.portrait||e.isNumeric(f.o.portrait)&&e(window).width()<parseFloat(f.o.portrait))if(f.el.addClass("mapplic-portrait"),f.el.hasClass("mapplic-fullscreen"))f.container.el.height(e(window).height());else{var t=Math.min(Math.max(f.container.el.width()*f.contentHeight/f.contentWidth,2*e(window).height()/3),e(window).height()-66);f.container.el.height(t)}else f.el.removeClass("mapplic-portrait"),f.container.el.height("100%"),f.el.height(f.container.calcHeight(f.o.height));var i=f.container.el.width()/f.contentWidth,a=f.container.el.height()/f.contentHeight;f.o.mapfill?f.fitscale=i>a?i:a:f.fitscale=i<a?i:a,f.container.oldW==f.container.el.width()&&f.container.oldH==f.container.el.height()||(f.container.oldW=f.container.el.width(),f.container.oldH=f.container.el.height(),f.container.resetZoom(),f.tooltip.limitSize())})).resize(),f.o.deeplinking&&(history.pushState&&"function"==typeof URL?f.deeplinking=new n:f.deeplinking=new s,f.deeplinking.init()),0==y&&v(),f.o.zoom&&f.container.addControls(),e(document).on("click",".mapplic-location",(function(t){t.preventDefault(),f.showLocation(e(this).attr("href").substr(1),400),e("html, body").animate({scrollTop:f.container.el.offset().top},400)}))},v=function(){f.el.trigger("mapready",f),f.o.alphabetic&&f.sidebar&&f.sidebar.sort(),f.legend.applyToggles(),f.o.csv&&Papa.parse(f.o.csv,{header:!0,download:!0,encoding:"UTF-8",skipEmptyLines:!0,complete:function(e,t){f.addLocations(e.data)}}),f.container.resetZoom(),f.deeplinking&&f.deeplinking.check(0),f.el.data("landmark")&&(f.o.landmark=f.el.data("landmark")),f.o.landmark&&(f.o.sidebar=!1,f.o.zoombuttons=!1,f.o.deeplinking=!1,f.showLocation(f.o.landmark,0))},w=function(e,t){var i=f.data.rightLng-f.data.leftLng,a=f.data.bottomLat*Math.PI/180,o=f.data.mapwidth/i*360/(2*Math.PI),n=o/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)));return e=e*Math.PI/180,{x:(t-f.data.leftLng)*(f.data.mapwidth/i)/f.data.mapwidth,y:(f.data.mapheight-(o/2*Math.log((1+Math.sin(e))/(1-Math.sin(e)))-n))/f.data.mapheight}},y=function(e){if(!(e&&e[0]instanceof SVGElement))return!1;var t=e[0].getBBox(),i=f.container.el.width()/(t.width+40),a=f.container.el.height()/(t.height+40);return{x:(t.x+t.width/2)/f.contentWidth,y:(t.y+t.height/2)/f.contentHeight,scale:Math.min(i,a)}},x=function(e){var t=y(e);return!!t&&(f.moveTo(t.x,t.y,t.scale,600),!0)},C=function(e){var t=!1;return e.category&&(t=e.category.toString().split(",")),e.fill?e.fill:f.g[t[0]]&&f.g[t[0]].color?f.g[t[0]].color:!!f.o.fillcolor&&f.o.fillcolor},b=function(e){var t=(f.container.el.width()-f.contentWidth*f.scale).toFixed(4);return t<0?e>f.o.zoommargin?e=f.o.zoommargin:e<t-f.o.zoommargin&&(e=t-f.o.zoommargin):e=t/2,e},k=function(e){var t=(f.container.el.height()-f.contentHeight*f.scale).toFixed(4);return t<0?e>f.o.zoommargin?e=f.o.zoommargin:e<t-f.o.zoommargin&&(e=t-f.o.zoommargin):e=t/2,e},T=function(e){return e<=f.fitscale?e=f.fitscale:e>f.o.maxscale&&(e=f.o.maxscale),clearTimeout(f.zoomTimeout),f.zoomTimeout=setTimeout((function(){f.zoombuttons&&f.zoombuttons.update(e),f.clearbutton&&f.clearbutton.update(e),e==f.fitscale&&(f.container.coverAll(),f.o.closezoomout&&f.hideLocation()),f.container.revealZoom(e)}),200),e},z=function(t,i,a,o){o=void 0!==o?o/1e3:0,f.map.css({transition:"transform "+o+"s",transform:"translate("+t.toFixed(3)+"px ,"+i.toFixed(3)+"px) scale("+f.scale.toFixed(3)+")"}),a&&(e(".mapplic-pin",f.map).css({transition:"opacity 0.2s, transform "+o+"s",transform:"scale("+1/f.scale+")"}),e(".mapplic-tooltip",f.map).css({transition:"transform 0.3s",transform:"scale("+1/f.scale+") translate(-50%, -100%)"})),f.minimap&&f.minimap.update(t,i),f.el.trigger("positionchanged",location)};f.switchLevel=function(t){switch(t){case"+":t=e("option:selected",f.levelselect).removeAttr("selected").prev().prop("selected","selected").val();break;case"-":t=e("option:selected",f.levelselect).removeAttr("selected").next().prop("selected","selected").val();break;default:e("button",f.selectLevel).removeClass("active"),e('button[value="'+t+'"]',f.levelselect).addClass("active")}if(t){var i=e('.mapplic-layer[data-floor="'+t+'"]',f.el);if(!i.is(":visible")){f.tooltip&&f.tooltip.hide(),e(".mapplic-layer:visible",f.map).hide(),i.show(),f.minimap&&f.minimap.show(t);var a=f.levelselect.get(0).selectedIndex,o=e(".mapplic-levels-up",f.el),n=e(".mapplic-levels-down",f.el);o.removeClass("mapplic-disabled"),n.removeClass("mapplic-disabled"),0==a?o.addClass("mapplic-disabled"):a==f.levelselect.get(0).length-1&&n.addClass("mapplic-disabled"),f.el.trigger("levelswitched",t)}}},f.moveTo=function(e,t,i,a,o){a=void 0!==a?a:400,o=void 0!==o?o:.5,i=void 0!==i?i:f.scale/f.fitscale,f.container.stopMomentum(),f.scale=T(i),f.x=b(.5*f.container.el.width()-f.scale*f.contentWidth*e),f.y=k(f.container.el.height()*o-f.scale*f.contentHeight*t),z(f.x,f.y,f.scale,a)},f.addLocations=function(t,i){e.each(t,(function(t,a){a.level||(a.level=i||f.data.levels[0].id),f.l[a.id]=a;var o=e('[id^=landmark] > *[id="'+a.id+'"]',f.map);if(o.length>0){o.attr("class","mapplic-clickable"),a.el=o;var n=null;a.fill?n=a.fill:f.o.fillcolor&&(n=f.o.fillcolor),n&&(o.css("fill",n),e("> *",o).css("fill",n))}if(a.lat&&a.lng){var s=w(a.lat,a.lng);a.x=s.x,a.y=s.y}if((!a.x||!a.y)&&o){var s=y(a.el);a.x=s.x,a.y=s.y}if(a.pin||(a.pin=f.o.marker),-1==a.pin.indexOf("hidden")){var l=e(".mapplic-layer[data-floor="+a.level+"]",f.el),r=e("<a></a>").attr("href","#").addClass("mapplic-pin").css({top:100*a.y+"%",left:100*a.x+"%"}).appendTo(l);r.on("click touchend",(function(e){e.preventDefault(),f.showLocation(a.id,600)})),a.label&&e("<span><span>"+a.label+"</span></span>").appendTo(r),a.fill&&r.css({"background-color":a.fill,"border-color":a.fill}),a.pin.indexOf("pin-image")>-1&&r.css("background-image","url("+a.thumbnail+")"),a.reveal&&r.attr("data-reveal",a.reveal).hide(),a.category&&(a.category=a.category.toString(),r.attr("data-category",a.category)),r.attr("data-location",a.id),a.el=r}a.el&&a.el.addClass(a.pin.replace("hidden","")),"reveal"==a.action&&e(".mapplic-pin[data-location^="+a.id+"]",f.map).hide(),f.sidebar&&"disabled"!=a.action&&"true"!=a.hide&&1!=a.hide&&(a.list=f.sidebar.addLocation(a))})),f.sidebar&&f.sidebar.countCategory()},f.getLocationData=function(e){return f.l[e]},f.showLocation=function(t,i,a){var o=f.location=f.l[t];if(!o)return!1;var n=o.action&&"default"!=o.action?o.action:f.o.action;if("disabled"==n)return!1;switch(n){case"open-link":return window.location.href=o.link,!1;case"open-link-new-tab":return window.open(o.link),f.location=null,!1;case"select":return o.el&&(o.el.hasClass("mapplic-active")?(o.el.removeClass("mapplic-active"),o.list&&o.list.removeClass("mapplic-active")):(o.el.addClass("mapplic-active"),o.list&&o.list.addClass("mapplic-active"))),!1;case"none":o.zoom?parseFloat(o.zoom):f.o.maxscale;f.hideLocation(),f.switchLevel(o.level),x(o.el);break;case"reveal":o.zoom?parseFloat(o.zoom):f.o.maxscale;f.hideLocation(),f.switchLevel(o.level),f.container.revealChild(o),f.o.zoom&&x(o.el);break;case"lightbox":f.switchLevel(o.level),f.lightbox.show(o);break;case"image":f.switchLevel(o.level),f.lightbox.showImage(o);break;default:f.switchLevel(o.level),f.tooltip.show(o)}e(".mapplic-active",f.el).removeClass("mapplic-active"),o.el&&o.el.addClass("mapplic-active"),o.list&&o.list.addClass("mapplic-active"),f.deeplinking&&!a&&f.deeplinking.update(t),f.el.trigger("locationopened",o)},f.hideLocation=function(){e(".mapplic-active",f.el).removeClass("mapplic-active"),f.deeplinking&&f.deeplinking.clear(),f.tooltip&&f.tooltip.hide(),f.location=null,f.el.trigger("locationclosed")},f.updateLocation=function(e){var t=f.l[e];if(t.id==e&&t.el.is("a")){if(t.lat&&t.lng){var i=w(t.lat,t.lng);t.x=i.x,t.y=i.y}var a=100*t.y,o=100*t.x;t.el.css({top:a+"%",left:o+"%"})}}};e.fn.mapplic=function(i){return this.each((function(){var a=e(this);if(!a.data("mapplic")){var o=new t(a).init(i);a.data("mapplic",o)}}))}})(jQuery),jQuery(document).ready((function(e){e("[id^=mapplic-id]").mapplic()}));